---
title: '重学网络(2)-IP分类,网段确定'
tags:
  - 网络
  - 重学开发
categories: 开发
abbrlink: 4947d79c
date: 2022-05-24 21:01:56
toc:
---

由于本系列是我个人在疫情期间心态的变化而重新学习网络后的总结，因此许多细节我并不会详细解释，默认读者已经知道，比如此处IP是什么东西，在OSI的第几层等内容，不过有些地方我会给出相应的解释链接

# [IP地址(Internet Protocol Address)](https://baike.baidu.com/item/IP地址/150859?fr=aladdin) 

- IPv4：32位，4字节表示（2019年1月25日全球可用IP地址已用完）
- IPv6：128位，16字节

我们这里先介绍IPv4
## IPv4
- 按字节分四部分组成，每部分1个字节，也就是8位，但是直接显示二进制不便于读写，所以一般我们转成十进制表示
![](https://raw.githubusercontent.com/Lazyloadingg/img-blog/master/img/202205241654289.png)
按功能分两部分网络标识（网络ID）和主机标识（主机ID）
同一网段网络ID相同，
### 子网掩码（subnet mask)

 网段通过子网掩码计算，通过`子网掩码 & IP地址`计算网段,举例:
 
```
IP地址：192.168.1.10
子网掩码：255.255.255.0
-----------------------
  1100 0000.1010 1000.0000 0001.0000 0000  -> IP地址（二进制）
& 1111 1111.1111 1111.1111 1111.0000 0000  -> 子网掩码（二进制）
-------------------------------------------
  1100 0000.1010 1000.0000 0001.0000 0000  -> 网段（二进制）
  192.168.1.0                              -> 网段(十进制)
  所以，这个例子中的192.168.1.0就是网段（网络ID），而最后一位就用来表示主机（主机ID）
```
不能直接把IP地址的前三部分当做网段，网段必须是通过`子网掩码 & IP地址`来计算，比如：
```
IP地址：130.168.1.10
子网掩码：255.255.0.0
网段：130.168.0.0 -> 最后两位表示主机，主机位要从1开始
```
 一个地址主机位全0就代表这是一个网段，主机位全255就表示这是个广播IP，给这个IP发消息就是给这个网段的所有主机发消息
### 地址分类
那么到底怎么确定网段呢？IP地址其实有分类，不同类别的IP地址网络标识部分长度不同，也就是网段部分长度也就不同，同样的主机位长度也不同，那么不同类别的IP地址网段内容纳的主机数也就不同

![地址分类](https://raw.githubusercontent.com/Lazyloadingg/img-blog/master/img/202205241659036.png)

比如A类地址由8位网络ID和24位主机ID组成，举例`1.168.1.1`，子网掩码`255.0.0.0`，那么网段就是`1.0.0.0`

主机位长度不同，对应的网段能容纳的主机数也就不同，主机位可以容纳的主机个数就是 `主机位最大值-2`**（因为255为广播地址，0用来表示网段）**
#### A类地址
![](https://raw.githubusercontent.com/Lazyloadingg/img-blog/master/img/202205241659568.png)
因为第一部分8位表示网络ID，并且必须以0开头，那么二进制取值范围就是`0000 0000 - 0111 1111`转化成十进制就是`0-127`
##### 网络ID部分
* 全0不能用
* 127位保留网段，我们常用的127.0.0.1是本地环回地址（Lookback）代表本机地址，它不属于任何一个有类别地址类。代表设备的本地虚拟接口，所以默认被看作是永远不会宕掉的接口
* 综合上边两条 A类地址网段范围就是`1-126`

##### 主机ID部分
* 主机ID部分三字节三部分，每部分取值范围是0-255
* 每个A类网络（网段）能容纳的主机数为256 * 256 * 256 -2 = 2^24 - 1 = 16777214（减去255和0）

#### B类地址
![](https://raw.githubusercontent.com/Lazyloadingg/img-blog/master/img/202205241704980.png)
因为前两部分16位表示网络ID，并且必须以10开头，那么二进制取值范围就是`1000 0000 0000 0000 - 1011 1111 1111 1111`转化成十进制就是`128.0-191.255`
##### 网络ID部分
* 第一部分取值范围128-191
* 第二部分取值范围0-255
* C类地址网段范围就是`128.0-191.255`

##### 主机ID部分
* 第三地部分取值范围都是0-255
* 每个B类网络（网段）能容纳的主机数为256 * 256 -2 = 2^16 - 2 = 65534

#### C类地址
![](https://raw.githubusercontent.com/Lazyloadingg/img-blog/master/img/202205241659590.png)
因为前三部分24位表示网络ID，并且必须以110开头，那么二进制取值范围就是`1100 0000 0000 0000 0000 0000 - 1101 1111 1111 1111 1111 1111`转化成十进制就是`192.0.0-223.255.255`
##### 网络ID部分
* 第一部分取值范围192-223
* 第二,三部分取值范围0-255
* C类地址网段范围就是`192.0.0-223.255.255`

##### 主机ID部分
* 第四地部分取值范围都是0-255
* 每个C类网络（网段）能容纳的主机数为256 - 2 = 254

#### D,E类地址
![](https://raw.githubusercontent.com/Lazyloadingg/img-blog/master/img/202205241659604.png)

那么我们其实可以快速的通过一个IP地址的第一部分来判断它属于什么类型进而确定网段范围和主机范围

|  第一部分|类别  |
|:---:|:---:|
| 0~127 | A类 |
| 128~191 | B类 |
| 192~223 | C类 |
| 224~239 | D类 |
| 240~255 | E类 |

比如看到一个IP`110.110.110.110`通过第一部分立马能判断吃它是A类地址


 #### 子网掩码CIDR表示法
 为了方便的表示IP和子网掩码，它们也可以写在一起，像下边这样

 - 192.168.1.100/24,代表IP为`192.168.1.100`,子网掩码是`24个二进制1`也就是`255.255.255.0`
 - 191.100.1.100/16,代表IP为`191.100.1.100`,子网掩码是`16个二进制1`也就是`255.255.0.0`
 
---

 [重学网络（一）网络通讯的基础](https://lazy.wiki/posts/49b8739d/)



 
 